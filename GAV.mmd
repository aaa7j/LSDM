erDiagram

  GLOBAL_PLAYER_SEASON {
    string  player_id
    int     season
    string  team_abbr
    string  player_name
    string  position
    int     g
    int     gs
    float   pts
    float   ast
    float   trb
    float   pts_per_game
    float   ast_per_game
    float   trb_per_game
    float   per
    float   ts_percent
    float   ws
    float   bpm
    float   vorp
    string  src_height
    string  src_weight
    string  src_position
    PK      (player_id, season)
  }

  GLOBAL_TEAM_SEASON {
    int     season
    string  team_abbr
    string  team_name
    string  city
    string  arena_name
    string  coach
    string  league
    int     attend
    int     attend_g
    float   o_rtg
    float   d_rtg
    float   n_rtg
    float   pace
    float   ts_percent
    string  src_arena
    string  src_coach
    PK      (season, team_abbr)
  }

  GLOBAL_GAME {
    string  game_id
    date    game_date
    int     season
    string  home_team_abbr
    string  away_team_abbr
    int     home_score
    int     away_score
    string  winner
    int     attendance
    PK      (game_id)
  }

  PLAYER_GAME_BOX {
    string  game_id
    string  player_id
    string  team_abbr
    int     season
    int     minutes
    int     fgm
    int     fga
    float   fg_pct
    int     fg3m
    int     fg3a
    float   fg3_pct
    int     ftm
    int     fta
    float   ft_pct
    int     oreb
    int     dreb
    int     reb
    int     ast
    int     stl
    int     blk
    int     tov
    int     pf
    int     pts
    float   plus_minus
    PK      (game_id, player_id)
  }

  PLAYER_PLAY_BY_PLAY {
    int     season
    string  player_id
    string  team_abbr
    string  player_name
    string  position
    int     g
    int     gs
    float   minutes
    PK      (player_id, season, team_abbr)
  }

  %% Relationships between GAV entities
  GLOBAL_TEAM_SEASON    ||--o{ GLOBAL_GAME        : "season, home/away_team_abbr"
  GLOBAL_GAME           ||--o{ PLAYER_GAME_BOX    : "game_id"
  GLOBAL_PLAYER_SEASON  ||--o{ PLAYER_GAME_BOX    : "player_id, season"
  PLAYER_PLAY_BY_PLAY   }o--|| GLOBAL_PLAYER_SEASON : "player_id, season, team_abbr"
  PLAYER_PLAY_BY_PLAY   }o--|| GLOBAL_TEAM_SEASON   : "season, team_abbr"
